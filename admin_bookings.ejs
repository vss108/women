<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin - Bookings</title>
  <style>body{font-family:Arial, sans-serif;margin:20px}table{width:100%;border-collapse:collapse}th,td{padding:8px;border:1px solid #ddd;text-align:left}a.delete{color:#c00}</style>
</head>
<body>
  <h1>Bookings</h1>
  <% if (!Array.isArray(bookings) || bookings.length === 0) { %>
    <p>No bookings yet.</p>
  <% } else { %>
    <table>
      <thead><tr><th>ID</th><th>Lab</th><th>Name</th><th>Email</th><th>Phone</th><th>Date</th><th>Time</th><th>Created</th><th></th></tr></thead>
      <tbody>
        <% bookings.forEach(function(b){ %>
          <tr>
            <td><%= b._id %></td>
            <td><%= (labsMap && labsMap[b.labId]) ? labsMap[b.labId] : b.labId %></td>
            <td><%= b.name %></td>
            <td><%= b.email || 'N/A' %></td>
            <td><%= b.phone || 'N/A' %></td>
            <td><%= b.date %></td>
            <td><%= b.time %></td>
            <td><%= new Date(b.createdAt).toLocaleString() %></td>
            <td><a class="delete" href="/admin/bookings/delete/<%= b._id %>" onclick="return confirm('Delete booking <%= b._id %>?')">Delete</a></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>
</body>
</html>
